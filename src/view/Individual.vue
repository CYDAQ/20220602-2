<template>
    <div class="Popover" v-if="Popover">
        {{data.data}}
    </div>
    <div class="container">
        <div class="row Settingscolor flex-row ">
            <div class="flex-1" @click="Jump('/login')" v-if="login">
                <div class="flex-row login">
                    <div class="yuan col-2">
                        <img src="../style/img/user.png" alt="用户" srcset="">
                    </div>
                    <div class="col">
                        <div style="margin-bottom: 8px;">请登录</div>
                        <div>成为vip有更多福利哦</div>
                    </div>
                </div>
            </div>
            <div v-else class="flex-1">
                <div class="flex-row login">

                    <div class="yuan col-2">
                        <img :src="avatar" alt="用户" srcset="" v-if="avatar==!'default.jpg'">
                        <img src="../style/img/user.png" alt="用户" srcset="" v-else>

                    </div>
                    <div class="col">
                        <div style="margin-bottom: 8px;" class="user">{{data.data.nickname}}</div>
                        <div class="vip">
                            <div>vip会员</div>
                            <div>有效期至{{data.data.expireDate}}</div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-1 Settingas" @click="Jump('/Settings')">
                <svg t="1645585334289" class="icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="2050" width="32" height="32">
                    <path
                        d="M448.362667 166.826667l113.6 0.170666a64 64 0 0 1 63.893333 63.914667l0.042667 18.517333a301.461333 301.461333 0 0 1 62.101333 34.88l15.210667-8.746666a64 64 0 0 1 87.296 23.381333l56.938666 98.304a64 64 0 0 1-19.989333 85.397333l-3.477333 2.133334-15.274667 8.810666c2.624 24.234667 2.304 48.853333-1.130667 73.322667l10.794667 6.250667a64 64 0 0 1 25.216 84.117333l-1.770667 3.306667-53.333333 92.373333a64 64 0 0 1-84.117333 25.216l-3.328-1.792-14.741334-8.533333a298.538667 298.538667 0 0 1-59.626666 33.28v25.386666a64 64 0 0 1-59.989334 63.957334l-4.074666 0.128-113.6-0.170667a64 64 0 0 1-63.893334-63.893333l-0.064-30.613334a302.613333 302.613333 0 0 1-50.069333-29.696l-27.221333 15.658667a64 64 0 0 1-87.296-23.402667l-56.938667-98.282666a64 64 0 0 1 19.989333-85.418667l3.477334-2.133333 27.690666-15.936c-2.133333-20.266667-2.24-40.768-0.192-61.226667l-30.741333-17.770667A64 64 0 0 1 158.506667 393.6l1.792-3.306667 53.333333-92.373333a64 64 0 0 1 84.117333-25.216l3.306667 1.792 26.794667 15.466667a297.984 297.984 0 0 1 56.426666-34.666667v-24.362667a64 64 0 0 1 59.989334-63.978666l4.074666-0.128z m-0.085334 64l0.064 65.066666-36.778666 17.301334c-15.744 7.402667-30.613333 16.533333-44.309334 27.221333l-34.005333 26.538667-62.570667-36.138667-1.6-0.896-53.333333 92.373333 66.56 38.421334-4.138667 41.152c-1.6 15.978667-1.536 32.106667 0.149334 48.085333l4.394666 41.429333-63.786666 36.736 56.917333 98.282667 63.338667-36.416 33.6 24.597333a237.994667 237.994667 0 0 0 39.466666 23.424l36.736 17.258667 0.128 71.168 113.578667 0.170667-0.064-68.16 39.466667-16.426667a234.538667 234.538667 0 0 0 46.826666-26.112l33.578667-24.128 50.56 29.184 53.290667-92.394667-48.128-27.818666 5.973333-42.688c2.666667-19.093333 2.965333-38.421333 0.896-57.6l-4.48-41.450667 51.456-29.696-56.938667-98.282667-51.2 29.504-33.621333-24.512a238.037333 238.037333 0 0 0-48.938667-27.498666l-39.381333-16.341334-0.128-61.184-113.578667-0.170666z m127.381334 183.722666a128.170667 128.170667 0 0 1 46.890666 174.933334 127.829333 127.829333 0 0 1-174.762666 46.848 128.170667 128.170667 0 0 1-46.869334-174.933334 127.829333 127.829333 0 0 1 174.741334-46.848z m-119.317334 78.805334a64.170667 64.170667 0 0 0 23.466667 87.573333 63.829333 63.829333 0 0 0 87.296-23.402667 64.170667 64.170667 0 0 0-20.266667-85.589333l-3.2-1.984-3.306666-1.770667a63.829333 63.829333 0 0 0-83.989334 25.173334z"
                        p-id="2051" fill="#ffffff"></path>
                </svg>
            </div>
        </div>
        <div>
            <table class="table Settings">
                <tbody>
                    <tr @click="Jump('/Notes')">
                        <td>
                            我的计划
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#2c2c2c"></path>
                            </svg>
                        </td>
                    </tr>
                    <tr @click="Jump('/Modify')">
                        <td>
                            修改密码
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#2c2c2c"></path>
                            </svg>
                        </td>
                    </tr>
                    <tr>
                        <td class="Grey">
                            我的观点
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#9a9a9a"></path>
                            </svg>
                        </td>
                    </tr>
                    <tr>
                        <td class="Grey">
                            帮助中心
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#9a9a9a"></path>
                            </svg>
                        </td>
                    </tr>
                    <tr>
                        <td class="Grey">
                            联系客服
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#9a9a9a"></path>
                            </svg>
                        </td>
                    </tr>
                    <tr>
                        <td class="Grey">
                            服务协议
                        </td>
                        <td>
                            <svg t="1645429065415" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2038" width="16" height="16">
                                <path
                                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                                    p-id="2039" fill="#9a9a9a"></path>
                            </svg>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <footers :footerdata="folder"></footers>
    <Request ref="Visit"></Request>

</template>
<script>
    import footers from "./Footers"
    import { defineComponent, ref } from 'vue';
    import { useRouter } from "vue-router";
    import Request from '../components/Request.vue'
    export default defineComponent({
        components: {
            footers,
            Request
        },
        setup() {
            const img = { background: "url(../style/img/1.png)" }
            const folder = 'person'
            const Popover = ref(false)
            const login = ref(true)
            const Visit = ref(null)
            const data = ref({
                data: {
                    nickname: null
                }
            })
            const router = useRouter();
            const Individualdata = {
                url: '/member',
                data: {}
            }
            const Detection = (res) => {
                data.value = res.data
                login.value = true
            }
            const handleClick = (eve) => {
                new Promise((resolve) => {
                    return resolve(Visit.value.onget(eve))
                }).then((res) => {
                    console.log(res);
                    switch (res.data.code) {
                        case 0:
                            data.value = res.data
                            login.value = false
                            break;
                        case 1:
                            Detection(res)
                            break;
                        default:
                            Detection(res)
                            setTimeout(function () {
                                Popover.value = false
                                router.push("/login");
                            }, 500)
                            break;
                    }
                }).catch(err => {
                    console.log(err);
                    login.value = true
                    router.push("/login");
                })
            }
            return {
                folder,
                handleClick,
                Visit,
                Popover,
                data,
                login,
                Individualdata,
                img
            }
        },
        mounted() {
            this.$nextTick(function () {
                this.handleClick(this.Individualdata)
            })
        },
        methods: {
            Jump(path) {
                this.$router.push(path)
            },
        }
    })
</script>
<style scoped>
    @import "../style/style.css";

    .login {
        margin: 60px 30px;
    }

    .Settingscolor {
        background-color: #3cb371;
        color: #fff;
    }

    .Settingas {
        margin: 10px 15px 0;

    }

    .icon {
        float: right;
        margin-top: 5px;
    }

    .yuan {
        width: 50px !important;
        height: 50px;
        border-radius: 100px;
        margin-right: 20px;
        background-color: #fff;
    }

    table {
        width: 100%;
    }

    tr {
        padding: 20px;
        display: flex;
        flex-flow: row;
        border-bottom: 0.7px solid rgba(0, 0, 0, 0.096);
    }

    td {
        flex-grow: 1;
    }

    .Popover {
        text-align: center;
        position: fixed;
        left: 50%;
        top: 200px;
        width: 150px;
        margin-left: -95px;
        padding: 20px;
        background-color: rgb(255, 255, 255);
        border-radius: 15px;
        z-index: 9999;
        box-shadow: 1px 1px 10px rgba(190, 190, 190, 0.4);
    }

    .Grey {
        color: #9a9a9a;
    }

    .user {
        font-size: 1.2rem;
    }

    .vip {
    }
</style>